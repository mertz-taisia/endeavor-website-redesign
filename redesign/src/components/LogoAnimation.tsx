// @ts-nocheck
import { useState, useRef } from 'react'
import { motion } from 'framer-motion'
import { Link } from 'react-router-dom'

function LogoAnimation() {
  const [showText, setShowText] = useState(false)
  const [visibleLetters, setVisibleLetters] = useState(0)
  const [logoShifted, setLogoShifted] = useState(false)
  const [showFramerNote, setShowFramerNote] = useState(false)
  const [showReturnToMainPageNote, setShowReturnToMainPageNote] = useState(false)
  const [showNavLogo, setShowNavLogo] = useState(false)
  const videoRef = useRef<HTMLVideoElement>(null)
  const word = 'Work in progress'
  
  // Handle video end event
  const handleEnded = () => {
    // Step 3: Slide the logo to the left
    setLogoShifted(true)
    
    // Wait for logo to finish sliding before showing text
    setTimeout(() => {
      setShowText(true)
      startLetterAnimation()
    }, 600) // Wait for logo slide animation to complete
    
    // Show navigation logo and return to main page note after animation completes
    setTimeout(() => {
      setShowNavLogo(true)
      setShowReturnToMainPageNote(true)
    }, 3000) // Delay showing the nav logo until after main animation
  }

  // Function to animate letters appearing one by one
  const startLetterAnimation = () => {
    let count = 0
    const interval = setInterval(() => {
      count++
      setVisibleLetters(count)
      
      if (count >= word.length) {
        clearInterval(interval)
        // Show the framer note after text animation completes
        setTimeout(() => setShowFramerNote(true), 500)
      }
    }, 100) // 100ms between each letter
    
    // Cleanup function
    return () => clearInterval(interval)
  }

  return (
    <div className="relative flex items-center justify-center min-h-screen bg-white">
      
      {/* Black Endeavor logo at the top for navigation */}
      {showNavLogo && (
        <div className="absolute top-8 left-8 cursor-pointer">
          <Link to="/">
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              transition={{ duration: 0.6 }}
              className="w-40"
            >
              <svg width="100%" height="100%" viewBox="0 0 265 58" preserveAspectRatio="xMidYMid meet" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fillRule="evenodd" clipRule="evenodd" d="M50.7325 28.784C44.4974 25.1859 38.6947 21.8341 32.4415 18.2239C32.4415 20.7468 32.3274 22.8672 32.5196 24.9637C32.5676 25.5103 33.4807 26.093 34.1114 26.4534C39.0851 29.3187 44.0589 32.178 49.0867 34.9352C50.3541 35.632 50.9488 36.4669 50.7386 37.8725C50.7265 37.9506 50.7205 38.0287 50.7386 38.1068C51.8739 42.7321 49.1287 44.9066 45.4044 46.3543C44.8157 46.5825 43.8786 46.4804 43.32 46.1561C35.7092 41.8191 28.1165 37.446 20.5778 32.9829C19.9351 32.6045 19.3404 31.5352 19.3344 30.7844C19.2503 21.9422 19.2443 13.1 19.3344 4.25785C19.3404 3.45292 20.0252 2.44376 20.692 1.89713C23.7014 -0.577714 26.5427 -0.613777 30.0207 1.68687C36.0877 5.69949 42.5211 9.1715 48.8764 12.7396C50.3181 13.5505 50.7866 14.4756 50.7566 16.0434C50.6665 20.1281 50.7265 24.2128 50.7265 28.7781L50.7325 28.784Z" fill="black"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M12.8108 28.3997C12.8108 30.5862 12.9129 32.2681 12.7807 33.926C12.6606 35.4758 13.3093 36.2807 14.6308 37.0136C21.8872 41.0322 29.0955 45.1469 36.3098 49.2377C36.8204 49.526 37.2889 49.8984 38.0938 50.451C33.9311 52.9559 30.0566 55.3286 26.1161 57.5933C25.6716 57.8515 24.7465 57.6473 24.2239 57.341C16.5591 52.9319 8.91228 48.4988 1.31954 43.9756C0.688811 43.6032 0.166209 42.5459 0.118154 41.777C-0.218233 35.7281 -0.1822 35.7161 5.10388 32.6886C7.50064 31.319 9.92744 29.9975 12.8048 28.3997H12.8108Z" fill="black"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M12.7684 6.45039C12.7684 11.5863 12.7865 16.1335 12.7384 20.6808C12.7384 21.0652 12.414 21.6119 12.0836 21.7981C8.26926 23.9666 4.42484 26.075 0.111874 28.4718C0.111874 23.3779 0.0998528 18.7826 0.141901 14.1873C0.141901 13.8809 0.466292 13.4545 0.760631 13.2863C4.56901 11.0877 8.39541 8.93125 12.7684 6.45039Z" fill="black"/>
                <path d="M72.2632 46.3555V12.5352H93.7319V17.082H77.5132V26.9258H92.8647V31.332H77.5132V41.8086H93.7319V46.3555H72.2632ZM98.5366 46.3555V21.6992H103.646V25.4258H103.74C104.396 24.1758 105.357 23.168 106.623 22.4023C107.888 21.6211 109.451 21.2305 111.31 21.2305C114.013 21.2305 116.107 22.0508 117.591 23.6914C119.076 25.3164 119.818 27.5508 119.818 30.3945V46.3555H114.732V31.3789C114.732 29.5195 114.294 28.0898 113.419 27.0898C112.56 26.0898 111.255 25.5898 109.505 25.5898C108.318 25.5898 107.279 25.8555 106.388 26.3867C105.513 26.918 104.833 27.6602 104.349 28.6133C103.88 29.5664 103.646 30.6914 103.646 31.9883V46.3555H98.5366ZM133.927 46.8477C131.833 46.8477 130.013 46.3242 128.466 45.2773C126.919 44.2305 125.724 42.7539 124.88 40.8477C124.037 38.9258 123.615 36.6523 123.615 34.0273V34.0039C123.615 31.3789 124.037 29.1133 124.88 27.207C125.74 25.3008 126.935 23.832 128.466 22.8008C130.013 21.7539 131.818 21.2305 133.88 21.2305C135.037 21.2305 136.115 21.418 137.115 21.793C138.115 22.168 138.998 22.707 139.763 23.4102C140.544 24.0977 141.177 24.9258 141.662 25.8945H141.755V12.5352H146.865V46.3555H141.755V42.1836H141.662C141.177 43.1523 140.552 43.9805 139.787 44.668C139.037 45.3555 138.169 45.8945 137.185 46.2852C136.201 46.6602 135.115 46.8477 133.927 46.8477ZM135.263 42.4648C136.544 42.4648 137.669 42.1211 138.638 41.4336C139.623 40.7305 140.388 39.7461 140.935 38.4805C141.498 37.2148 141.779 35.7305 141.779 34.0273V34.0039C141.779 32.3008 141.498 30.8242 140.935 29.5742C140.373 28.3086 139.607 27.332 138.638 26.6445C137.669 25.9414 136.544 25.5898 135.263 25.5898C133.935 25.5898 132.787 25.9336 131.818 26.6211C130.849 27.293 130.099 28.2617 129.568 29.5273C129.052 30.7773 128.794 32.2695 128.794 34.0039V34.0273C128.794 35.7617 129.052 37.2695 129.568 38.5508C130.099 39.8164 130.849 40.7852 131.818 41.457C132.787 42.1289 133.935 42.4648 135.263 42.4648ZM162.568 46.8477C160.162 46.8477 158.083 46.332 156.333 45.3008C154.599 44.2539 153.263 42.7773 152.326 40.8711C151.404 38.9492 150.943 36.6914 150.943 34.0977V34.0742C150.943 31.5117 151.412 29.2695 152.349 27.3477C153.287 25.4102 154.607 23.9102 156.31 22.8477C158.013 21.7695 160.013 21.2305 162.31 21.2305C164.623 21.2305 166.607 21.7461 168.263 22.7773C169.935 23.793 171.224 25.2383 172.13 27.1133C173.037 28.9727 173.49 31.1367 173.49 33.6055V35.3164H153.451V31.7305H171.029L168.521 35.082V33.1133C168.521 31.3789 168.255 29.9414 167.724 28.8008C167.208 27.6445 166.482 26.7852 165.544 26.2227C164.623 25.6602 163.552 25.3789 162.333 25.3789C161.13 25.3789 160.052 25.6758 159.099 26.2695C158.146 26.8633 157.396 27.7383 156.849 28.8945C156.302 30.0352 156.029 31.4414 156.029 33.1133V35.082C156.029 36.6758 156.294 38.043 156.826 39.1836C157.373 40.3086 158.146 41.1758 159.146 41.7852C160.146 42.3789 161.326 42.6758 162.685 42.6758C163.685 42.6758 164.568 42.5273 165.333 42.2305C166.099 41.918 166.732 41.5117 167.232 41.0117C167.748 40.4961 168.107 39.9258 168.31 39.3008L168.38 39.1133H173.208L173.162 39.3711C172.958 40.3398 172.576 41.2695 172.013 42.1602C171.451 43.0508 170.716 43.8555 169.81 44.5742C168.919 45.2773 167.865 45.832 166.646 46.2383C165.427 46.6445 164.068 46.8477 162.568 46.8477ZM184.646 46.8008C183.005 46.8008 181.568 46.4883 180.333 45.8633C179.099 45.2383 178.138 44.3633 177.451 43.2383C176.763 42.1133 176.419 40.8164 176.419 39.3477V39.3008C176.419 37.8633 176.779 36.6289 177.498 35.5977C178.216 34.5508 179.255 33.7227 180.615 33.1133C181.99 32.5039 183.646 32.1445 185.583 32.0352L194.912 31.4727V35.0352L186.263 35.5742C184.748 35.668 183.576 36.0352 182.748 36.6758C181.935 37.3008 181.529 38.1367 181.529 39.1836V39.2305C181.529 40.3086 181.935 41.1602 182.748 41.7852C183.576 42.4102 184.669 42.7227 186.029 42.7227C187.216 42.7227 188.279 42.4805 189.216 41.9961C190.169 41.5117 190.919 40.8477 191.466 40.0039C192.013 39.1445 192.287 38.1836 192.287 37.1211V29.7852C192.287 28.4258 191.865 27.3633 191.021 26.5977C190.177 25.8164 188.966 25.4258 187.388 25.4258C185.935 25.4258 184.763 25.7383 183.873 26.3633C182.998 26.9883 182.451 27.793 182.232 28.7773L182.185 28.9883H177.404L177.427 28.7305C177.552 27.3086 178.029 26.0352 178.857 24.9102C179.685 23.7695 180.833 22.8711 182.302 22.2148C183.771 21.5586 185.513 21.2305 187.529 21.2305C189.544 21.2305 191.287 21.5664 192.755 22.2383C194.224 22.9102 195.365 23.8555 196.177 25.0742C196.99 26.293 197.396 27.7227 197.396 29.3633V46.3555H192.287V42.4648H192.193C191.708 43.3555 191.083 44.1289 190.318 44.7852C189.552 45.4258 188.685 45.9258 187.716 46.2852C186.763 46.6289 185.74 46.8008 184.646 46.8008ZM209.021 46.3555L200.138 21.6992H205.529L211.716 41.3867H211.833L217.998 21.6992H223.318L214.482 46.3555H209.021ZM235.927 46.8477C233.568 46.8477 231.505 46.332 229.74 45.3008C227.99 44.2539 226.63 42.7773 225.662 40.8711C224.693 38.9492 224.208 36.668 224.208 34.0273V33.9805C224.208 31.3555 224.693 29.0898 225.662 27.1836C226.646 25.2773 228.013 23.8086 229.763 22.7773C231.529 21.7461 233.576 21.2305 235.904 21.2305C238.248 21.2305 240.294 21.7461 242.044 22.7773C243.81 23.793 245.177 25.2539 246.146 27.1602C247.13 29.0664 247.623 31.3398 247.623 33.9805V34.0273C247.623 36.6836 247.13 38.9648 246.146 40.8711C245.177 42.7773 243.818 44.2539 242.068 45.3008C240.318 46.332 238.271 46.8477 235.927 46.8477ZM235.951 42.582C237.263 42.582 238.404 42.2461 239.373 41.5742C240.341 40.9023 241.091 39.9336 241.623 38.668C242.154 37.3867 242.419 35.8398 242.419 34.0273V33.9805C242.419 32.1836 242.154 30.6523 241.623 29.3867C241.091 28.1055 240.333 27.1367 239.349 26.4805C238.365 25.8086 237.216 25.4727 235.904 25.4727C234.607 25.4727 233.466 25.8086 232.482 26.4805C231.513 27.1523 230.755 28.1211 230.208 29.3867C229.662 30.6523 229.388 32.1836 229.388 33.9805V34.0273C229.388 35.8398 229.654 37.3867 230.185 38.668C230.732 39.9336 231.498 40.9023 232.482 41.5742C233.466 42.2461 234.623 42.582 235.951 42.582ZM251.537 46.3555V21.6992H256.646V25.918H256.74C257.13 24.4648 257.826 23.3242 258.826 22.4961C259.826 21.6523 261.029 21.2305 262.435 21.2305C262.81 21.2305 263.146 21.2539 263.443 21.3008C263.755 21.332 264.005 21.3711 264.193 21.418V26.1289C263.99 26.0508 263.685 25.9883 263.279 25.9414C262.873 25.8789 262.419 25.8477 261.919 25.8477C260.841 25.8477 259.904 26.082 259.107 26.5508C258.31 27.0039 257.701 27.668 257.279 28.543C256.857 29.4023 256.646 30.4414 256.646 31.6602V46.3555H251.537Z" fill="black"/>
              </svg>
            </motion.div>
          </Link>
        </div>
      )}
      {/* Fixed-width container to prevent layout shifts */}
      <div className="relative flex items-center justify-center w-[600px] h-[200px]">
        {/* Framer note with curved arrow */}
        {showFramerNote && (
          <motion.div 
            className="absolute font-medium"
            style={{ left: '10px', top: '30px' }}
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            transition={{ duration: 0.5 }}
          >
            <div className="flex items-center">
              <div className="text-[#00A3FF] flex flex-col text-sm font-semibold text-center"
                style={{ transform: 'rotate(-7deg)'}}>
                <span className="">made in</span>
                <span className="">blender</span>
              </div>
              

              <svg 
                width="26" 
                height="39" 
                viewBox="0 0 26 39" 
                fill="none" 
                xmlns="http://www.w3.org/2000/svg"
                className="ml-2"
                style={{ transform: 'scale(0.75) translateY(35px) translateX(-100px)' }}
              >
                <path 
                  d="M9.31087 0.548141C8.94275 0.372432 8.51719 0.355314 8.12758 0.50054C7.73797 0.645766 7.41614 0.941474 7.23274 1.32276C4.43169 5.83815 3.17006 7.55987 1.00077 13.0007C0.203364 15.0007 -0.00402047 18.9865 0.894113 22.196C1.81765 25.4963 4.21347 28.1114 6.13522 29.0672C8.44521 30.4122 9.44864 30.7847 12.2188 31.1767C15.4077 31.6404 16.93 31.8349 20.1409 31.7171L13.2588 35.1682C13.0609 35.2342 12.8768 35.3395 12.7171 35.4779C12.5575 35.6164 12.4256 35.7852 12.3291 35.9746C12.2326 36.1639 12.1735 36.3699 12.1552 36.5805C12.1369 36.7912 12.1598 37.0022 12.2226 37.2013C12.2854 37.4003 12.3868 37.5834 12.5208 37.7398C12.6549 37.8962 12.8189 38.0227 13.0033 38.112C13.1876 38.2013 13.3887 38.2515 13.5946 38.2598C13.8005 38.268 14.0072 38.2341 14.2025 38.1601L24.6522 32.4383C25.0441 32.2987 25.3702 32.0072 25.5588 31.628C25.7474 31.2487 25.7831 30.8128 25.658 30.4161L20.3212 21.8371C20.2609 21.6362 20.1614 21.4509 20.0287 21.2921C19.8959 21.1334 19.7326 21.0043 19.5483 20.9127C19.274 20.7763 18.9638 20.7279 18.6573 20.7737C18.3507 20.8194 18.0619 20.9573 17.8276 21.1695C17.5933 21.3818 17.4242 21.6588 17.342 21.9652C17.2597 22.2716 17.2681 22.5935 17.3659 22.8897L21.5635 28.8569C18.1059 28.8861 16.1734 28.7547 12.6473 27.9784C10.2094 27.2999 8.98304 26.7422 6.87021 25.4289C5.87218 24.7219 4.60248 23.3391 3.82148 21.1943C3.2408 19.0334 3.08703 15.8931 3.58841 14.5649C5.72746 9.04507 7.2242 7.3602 9.99005 2.6942C10.0877 2.50413 10.1477 2.29705 10.1663 2.08524C10.185 1.87342 10.162 1.66117 10.0986 1.46106C10.0353 1.26095 9.93295 1.07704 9.79764 0.920232C9.66232 0.76342 9.4968 0.636893 9.31087 0.548141Z" 
                  fill="#00A3FF"
                />
              </svg>
            </div>
          </motion.div>
        )}
        {showReturnToMainPageNote && (
          <motion.div 
            className="absolute font-medium"
            style={{ left: '-340px', top: '-220px' }}
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            transition={{ duration: 0.5 }}
          >
            <div className="flex items-center">
              <div className="text-[#FF00E5] flex flex-col text-sm font-semibold text-center"
                style={{ transform: 'rotate(-5deg)'}}>
                <span className="">return to</span>
                <span className="">main page</span>
              </div>
              
              <svg width="22" height="39" viewBox="0 0 22 39" fill="none" xmlns="http://www.w3.org/2000/svg"
                style={{ transform: 'scale(0.75) translateY(-30px) translateX(-5px)' }}
                >
                <path d="M7.22558 37.7109C7.52078 37.9923 7.91991 38.141 8.33536 38.1241C8.75082 38.1073 9.14866 37.9264 9.44157 37.621C13.5082 34.2009 15.2427 32.957 18.9968 28.4608C20.3767 26.808 21.8136 23.0845 21.9583 19.7548C22.1071 16.331 20.6435 13.1004 19.1144 11.5942C17.3374 9.59743 16.4996 8.9313 13.9888 7.6971C11.1023 6.26459 9.716 5.60623 6.6277 4.71941L14.2419 3.58011C14.4505 3.57897 14.6582 3.53617 14.853 3.45424C15.0478 3.37231 15.2257 3.25288 15.3763 3.10296C15.5269 2.95303 15.6472 2.77563 15.7301 2.58113C15.813 2.38663 15.8568 2.17894 15.8591 1.97023C15.8613 1.76152 15.8219 1.55599 15.7431 1.36567C15.6644 1.17535 15.5479 1.00407 15.4004 0.861855C15.2529 0.719641 15.0775 0.609356 14.8844 0.537456C14.6912 0.465556 14.4843 0.43349 14.2756 0.443133L2.56451 2.63074C2.14866 2.64158 1.7481 2.81718 1.45089 3.11891C1.15367 3.42065 0.984148 3.82382 0.979592 4.23979L3.38323 14.0532C3.37809 14.2629 3.41499 14.4699 3.49177 14.6621C3.56854 14.8543 3.68363 15.0278 3.83023 15.1722C4.04851 15.3871 4.32831 15.5296 4.63387 15.5814C4.93942 15.6333 5.25683 15.5922 5.54553 15.4633C5.83423 15.3345 6.08109 15.1238 6.25456 14.8581C6.42802 14.5925 6.52022 14.284 6.51934 13.9721L4.38605 6.99519C7.68124 8.04298 9.47697 8.76893 12.5867 10.6034C14.6926 12.0066 15.6847 12.9181 17.2842 14.8234C18.0128 15.8058 18.7894 17.515 18.8646 19.7962C18.7443 22.0306 17.9137 25.063 17.024 26.1694C13.2742 30.75 11.3276 31.8858 7.24761 35.46C7.09565 35.6103 6.97426 35.7884 6.89065 35.9839C6.80704 36.1794 6.7629 36.3883 6.76085 36.5982C6.7588 36.8081 6.79887 37.0147 6.87869 37.2058C6.95852 37.3969 7.07648 37.5687 7.22558 37.7109Z" fill="#FF00E6"/>
              </svg>
            </div>
          </motion.div>
        )}
        {/* Logo with smooth animation */}
        <motion.div 
          className="absolute"
          initial={{ x: 0 }}
          animate={{ 
            x: logoShifted ? -280 : 0 // Increased left shift by 50px
          }}
          transition={{ 
            type: 'spring', 
            stiffness: 70, 
            damping: 14,
            mass: 0.8,
            duration: 0.6
          }}
          style={{ 
            left: '50%', 
            transform: logoShifted ? 'translateX(-50%) translateX(-280px)' : 'translateX(-50%)',
            transformOrigin: 'center'
          }}
        >
          <video
            ref={videoRef}
            onEnded={handleEnded}
            autoPlay
            muted
            playsInline
            className="w-[100px] h-auto"
          >
            <source src="/logo_animation.webm" type="video/webm" />
            Your browser does not support the video tag.
          </video>
        </motion.div>

        {/* Text with letter-by-letter animation at fixed position */}
        {showText && (
          <div 
            className="absolute text-5xl font-bold text-black whitespace-nowrap"
            style={{ left: 'calc(50% - 180px)' }} // Shifted 50px more to the left
          >
            {word.split('').slice(0, visibleLetters).map((letter, index) => (
              <motion.span
                key={index}
                initial={{ opacity: 0, y: 10, scale: 0.9 }}
                animate={{ opacity: 1, y: 0, scale: 1 }}
                transition={{ 
                  duration: 0.3, 
                  ease: [0.22, 1, 0.36, 1]
                }}
                className="inline-block"
              >
                {letter === ' ' ? ' ' : letter}
              </motion.span>
            ))}
          </div>
        )}
      </div>
    </div>
  )
}

export default LogoAnimation
